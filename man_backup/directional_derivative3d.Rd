% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/directional_derivative3d.R
\name{directional_derivative3d}
\alias{directional_derivative3d}
\title{Directional derivative and local visualization on a surface z = F(x,y)}
\usage{
directional_derivative3d(
  F,
  point,
  dir,
  h = 1e-04,
  plot = FALSE,
  x_window = 2,
  y_window = 2,
  n_s = 180,
  n_r = 50,
  show_strip = TRUE,
  strip_colorscale = "Blues",
  strip_opacity = 0.3,
  show_surface_grid = TRUE,
  surface_grid_color = "rgba(60,80,200,0.25)",
  surface_grid_width = 1,
  curve_line = list(color = "red", width = 0.8),
  point_marker = list(color = "black", size = 3, symbol = "circle"),
  u_line = list(color = "black", width = 1),
  w_line = list(color = "black", width = 0.5),
  t_range = c(-2, 2),
  scene = list(aspectmode = "data", xaxis = list(title = "x"), yaxis = list(title = "y"),
    zaxis = list(title = "z")),
  bg = list(paper = "white", plot = "white"),
  tol = 1e-12
)
}
\arguments{
\item{F}{Function \code{F(x,y)} returning \code{z}.}

\item{point}{Numeric vector \code{c(a,b)}.}

\item{dir}{In-plane direction vector \code{c(dx,dy)} (non-zero).}

\item{h}{Step size for centered finite differences (default \code{1e-4}).}

\item{plot}{Logical; if \code{TRUE}, draw with \pkg{plotly}.}

\item{x_window, y_window}{Half-widths of the local window in \code{x} and \code{y}.}

\item{n_s, n_r}{Strip resolutions (parameters analogous to \code{x} and \code{r} in Maxima).}

\item{show_strip}{\code{TRUE}/\code{FALSE}, draw the strip over the surface (instead of the whole surface).}

\item{strip_colorscale}{Plotly colorscale for the strip (e.g. \code{"Blues"}).}

\item{strip_opacity}{Strip opacity (0â€“1).}

\item{show_surface_grid}{\code{TRUE}/\code{FALSE} to show a grid over the strip.}

\item{surface_grid_color}{Grid color (e.g. \code{"rgba(60,80,200,0.25)"}).}

\item{surface_grid_width}{Grid line width.}

\item{curve_line}{Line style for the directional curve (e.g. \code{list(color="red", width=0.8)}).}

\item{point_marker}{Style of the base point \eqn{(a,b,f(a,b))}.}

\item{u_line, w_line}{Line styles for the vectors \eqn{\mathbf u} and \eqn{\mathbf w}.}

\item{t_range}{Range of \code{t} for the directional curve (default \code{c(-2,2)}).}

\item{scene}{3D scene settings (default \code{aspectmode="data"}).}

\item{bg}{Background colors: \code{list(paper="white", plot="white")}.}

\item{tol}{Numerical tolerance.}
}
\value{
A list with:
\itemize{
\item \code{fx}, \code{fy}: numerical gradient at \code{(a,b)}.
\item \code{D}: directional derivative \eqn{D=\nabla F\cdot \hat d}.
\item \code{dir_hat}: unit direction \eqn{\hat d}.
\item \code{u}, \code{w}: 3D vectors used in the figure.
\item \code{fig}: plotly object if \code{plot=TRUE}, otherwise \code{NULL}.
}
}
\description{
Numerical translation of \code{der_dir(...)} from WxMaxima.
Given \eqn{F:\mathbb{R}^2\to\mathbb{R}}, a point \eqn{(a,b)}, and a direction
\eqn{\mathbf d=(d_x,d_y)}, this computes \eqn{D=\nabla F(a,b)\cdot \hat{\mathbf d}} and,
optionally, draws a strip of the surface near the line along \eqn{\hat{\mathbf d}},
the directional curve on \eqn{F}, and the vectors \eqn{\mathbf u}, \eqn{\mathbf w}.
}
\examples{
F <- function(x,y) (x^2 + y^2)/8 + sin(x/2)
res <- directional_derivative3d(
  F, point = c(1, -1), dir = c(1, 0.5),
  plot = TRUE, strip_colorscale = "Blues",
  show_surface_grid = TRUE
)
res$D

}
